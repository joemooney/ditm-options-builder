<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DITM Options Portfolio Builder</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <i class="fas fa-chart-line"></i>
                <span>DITM Options Builder</span>
            </div>
            <div class="nav-menu">
                <a href="#" class="nav-link active" data-page="dashboard">
                    <i class="fas fa-th-large"></i> Dashboard
                </a>
                <a href="#" class="nav-link" data-page="scan">
                    <i class="fas fa-search"></i> New Scan
                </a>
                <a href="#" class="nav-link" data-page="performance">
                    <i class="fas fa-chart-bar"></i> Performance
                </a>
                <a href="#" class="nav-link" data-page="docs">
                    <i class="fas fa-book"></i> Documentation
                </a>
                <a href="#" class="nav-link" data-page="settings">
                    <i class="fas fa-cog"></i> Settings
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <div class="container">
            <!-- Dashboard Page -->
            <div id="page-dashboard" class="page active">
                <div class="page-header">
                    <h1><i class="fas fa-th-large"></i> Dashboard</h1>
                    <p>Overview of your DITM options portfolio</p>
                </div>

                <!-- Status Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon blue">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Total Invested</div>
                            <div class="stat-value" id="stat-invested">$0.00</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">
                            <i class="fas fa-arrow-up"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Current Value</div>
                            <div class="stat-value" id="stat-value">$0.00</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon purple">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Total P&L</div>
                            <div class="stat-value" id="stat-pnl">$0.00</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Win Rate</div>
                            <div class="stat-value" id="stat-winrate">0%</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-bolt"></i> Quick Actions</h2>
                    </div>
                    <div class="card-body">
                        <div class="button-group">
                            <button class="btn btn-primary" onclick="showPage('scan')">
                                <i class="fas fa-search"></i> Run New Scan
                            </button>
                            <button class="btn btn-secondary" onclick="updatePerformance()">
                                <i class="fas fa-sync"></i> Update Performance
                            </button>
                            <button class="btn btn-secondary" onclick="showPage('docs')">
                                <i class="fas fa-book"></i> View Documentation
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-clock"></i> Open Positions</h2>
                    </div>
                    <div class="card-body">
                        <div id="open-positions-table">
                            <p class="text-muted">No data available. Run a scan to get started.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Scan Page -->
            <div id="page-scan" class="page">
                <div class="page-header">
                    <h1><i class="fas fa-search"></i> Run Options Scan</h1>
                    <p>Scan for deep-in-the-money call options</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-cog"></i> Scan Configuration</h2>
                    </div>
                    <div class="card-body">
                        <form id="scan-form">
                            <div class="form-group">
                                <label for="tickers-input">
                                    <i class="fas fa-list"></i> Ticker Symbols
                                    <span class="help-text">Comma-separated (e.g., AAPL, MSFT, GOOGL)</span>
                                </label>
                                <div class="ticker-input-container">
                                    <input type="text" id="tickers-input" class="form-control"
                                           placeholder="Enter ticker symbols..." required>
                                    <div id="ticker-chips" class="ticker-chips"></div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="capital-input">
                                    <i class="fas fa-dollar-sign"></i> Target Capital
                                </label>
                                <input type="number" id="capital-input" class="form-control"
                                       value="50000" min="1000" step="1000" required>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-rocket"></i> Run Scan
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Scan Results -->
                <div id="scan-results" class="card" style="display: none;">
                    <div class="card-header">
                        <h2><i class="fas fa-check-circle"></i> Scan Results</h2>
                    </div>
                    <div class="card-body">
                        <div id="scan-results-content"></div>
                    </div>
                </div>
            </div>

            <!-- Performance Page -->
            <div id="page-performance" class="page">
                <div class="page-header">
                    <h1><i class="fas fa-chart-bar"></i> Performance Analytics</h1>
                    <p>Track your strategy performance over time</p>
                    <button class="btn btn-secondary" onclick="updatePerformance()">
                        <i class="fas fa-sync"></i> Refresh Data
                    </button>
                </div>

                <!-- Risk Metrics -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-shield-alt"></i> Risk Metrics</h2>
                    </div>
                    <div class="card-body">
                        <div id="risk-metrics-grid" class="metrics-grid">
                            <p class="text-muted">Loading...</p>
                        </div>
                    </div>
                </div>

                <!-- Positions Table -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-table"></i> All Positions</h2>
                    </div>
                    <div class="card-body">
                        <div id="performance-table">
                            <p class="text-muted">Loading...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Documentation Page -->
            <div id="page-docs" class="page">
                <div class="page-header">
                    <h1><i class="fas fa-book"></i> Documentation</h1>
                    <p>Guides and references for DITM options trading</p>
                </div>

                <div class="docs-nav">
                    <button class="btn btn-outline" onclick="loadDoc('user_guide')">
                        <i class="fas fa-user-graduate"></i> User Guide
                    </button>
                    <button class="btn btn-outline" onclick="loadDoc('schwab_setup')">
                        <i class="fas fa-key"></i> Schwab Setup
                    </button>
                    <button class="btn btn-outline" onclick="loadDoc('tracking_guide')">
                        <i class="fas fa-chart-line"></i> Tracking Guide
                    </button>
                    <button class="btn btn-outline" onclick="loadDoc('readme')">
                        <i class="fas fa-info-circle"></i> README
                    </button>
                </div>

                <div class="card">
                    <div class="card-body">
                        <div id="doc-content" class="doc-content">
                            <h2>Welcome to the DITM Options Portfolio Builder</h2>
                            <p>Select a document from above to view its contents.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div id="page-settings" class="page">
                <div class="page-header">
                    <h1><i class="fas fa-cog"></i> Settings</h1>
                    <p>Configure filter parameters and preferences</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-sliders-h"></i> Filter Parameters</h2>
                    </div>
                    <div class="card-body">
                        <form id="settings-form">
                            <div class="settings-grid">
                                <div class="form-group">
                                    <label>MIN_DELTA</label>
                                    <input type="number" id="setting-min-delta" class="form-control"
                                           step="0.01" min="0" max="1" value="0.80">
                                    <small>Minimum option delta (0.80-0.95 recommended)</small>
                                </div>
                                <div class="form-group">
                                    <label>MAX_DELTA</label>
                                    <input type="number" id="setting-max-delta" class="form-control"
                                           step="0.01" min="0" max="1" value="0.95">
                                    <small>Maximum option delta</small>
                                </div>
                                <div class="form-group">
                                    <label>MIN_INTRINSIC_PCT</label>
                                    <input type="number" id="setting-min-intrinsic" class="form-control"
                                           step="0.01" min="0" max="1" value="0.85">
                                    <small>Minimum intrinsic value %</small>
                                </div>
                                <div class="form-group">
                                    <label>MIN_DTE</label>
                                    <input type="number" id="setting-min-dte" class="form-control"
                                           step="1" min="0" value="90">
                                    <small>Minimum days to expiration</small>
                                </div>
                                <div class="form-group">
                                    <label>MAX_IV</label>
                                    <input type="number" id="setting-max-iv" class="form-control"
                                           step="0.01" min="0" max="2" value="0.30">
                                    <small>Maximum implied volatility</small>
                                </div>
                                <div class="form-group">
                                    <label>MAX_SPREAD_PCT</label>
                                    <input type="number" id="setting-max-spread" class="form-control"
                                           step="0.001" min="0" max="0.1" value="0.02">
                                    <small>Maximum bid-ask spread %</small>
                                </div>
                                <div class="form-group">
                                    <label>MIN_OI</label>
                                    <input type="number" id="setting-min-oi" class="form-control"
                                           step="50" min="0" value="500">
                                    <small>Minimum open interest</small>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> Save Settings
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="resetSettings()">
                                    <i class="fas fa-undo"></i> Reset to Defaults
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="spinner"></div>
        <p id="loading-message">Processing...</p>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <script src="/static/js/app.js"></script>
</body>
</html>
